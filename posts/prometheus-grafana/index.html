<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Install Prometheus dan Grafana | Ginton Afnanin</title><meta name=keywords content="Node Exporter,Prometheus,Grafana"><meta name=description content="Monitor Server Dengan Prometheus dan Grafana"><meta name=author content="Ginton Afnanin Khoir"><link rel=canonical href=https://opstekel.github.io/posts/prometheus-grafana/><meta name=google-site-verification content="7xkl7tm1-iJxieMKGetoXQpqJffAVKatOFgXg7ddX_Y"><link crossorigin=anonymous href=/assets/css/stylesheet.min.35cd0f65a15cafa92372b8313deef5960aae04b90ad722f2bbf509eb0468137e.css integrity="sha256-Nc0PZaFcr6kjcrgxPe71lgquBLkK1yLyu/UJ6wRoE34=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://opstekel.github.io/logo.png><link rel=icon type=image/png sizes=16x16 href=https://opstekel.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://opstekel.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://opstekel.github.io/apple-touch-icon.png><link rel=mask-icon href=https://opstekel.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.112.3"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-182251419-3","auto"),ga("send","pageview"))</script><meta property="og:title" content="Install Prometheus dan Grafana"><meta property="og:description" content="Monitor Server Dengan Prometheus dan Grafana"><meta property="og:type" content="article"><meta property="og:url" content="https://opstekel.github.io/posts/prometheus-grafana/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-28T00:00:00+00:00"><meta property="article:modified_time" content="2023-05-28T00:00:00+00:00"><meta property="og:site_name" content="Ginton Afnanin Khoir"><meta name=twitter:card content="summary"><meta name=twitter:title content="Install Prometheus dan Grafana"><meta name=twitter:description content="Monitor Server Dengan Prometheus dan Grafana"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://opstekel.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Install Prometheus dan Grafana","item":"https://opstekel.github.io/posts/prometheus-grafana/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Install Prometheus dan Grafana","name":"Install Prometheus dan Grafana","description":"Monitor Server Dengan Prometheus dan Grafana","keywords":["Node Exporter","Prometheus","Grafana"],"articleBody":"Lingkungan Install Node Exporter Node exporter adalah aplikasi yang digunakan untuk mengekspor metrik dari sebuah sistem atau node ke dalam format yang dapat digunakan oleh sistem monitoring seperti prometheus. Node exporter berfungsi sebagai agen yang diinstall pada setiap node atau VM yang ingin di monitoring.\nBuat user node_exporter untuk menjalankan service node exporter.\nuseradd --no-create-home --shell /bin/false node_exporter Download dan install packages node exporter.\nwget https://github.com/prometheus/node_exporter/releases/download/v1.5.0/node_exporter-1.5.0.linux-amd64.tar.gz tar xvf node_exporter-1.5.0.linux-amd64 cd node_exporter-1.5.0.linux-amd64/ chown node_exporter:node_exporter node_exporter cp node_exporter /usr/local/bin/ Untuk melihat collectors node exporter jalankan.\nroot@lab-node-exporter-1:~# node_exporter Buat service node exporter.\nnano /etc/systemd/system/node_exporter.service #... [Unit] Description=Node Exporter [Service] User=node_exporter Type=simple ExecStart=/usr/local/bin/node_exporter --collector.systemd --collector.cpu --collector.meminfo --collector.loadavg --collector.uname \\ --collector.stat --collector.filesystem --collector.netstat Restart=on-failure RestartSec=5 [Install] WantedBy=multi-user.target #... Restart service node exporter.\nsystemd daemon-reload systemctl restart node_exporter.service systemctl enable node_exporter.service systemctl status node_exporter.service Cek listen port dari node exporter.\nss -tunlp |grep 9100 Check metrics node exporter.\ncurl http://:9100/metrics Install Prometheus Prometheus adalah sistem monitoring open source yang dirancang khusus untuk memantau dan mengumpulkan data metrik dari berbagai sistem dan layanan.\nBuat user prometheus untuk menjalankan service prometheus.\nuseradd --no-create-home --shell /bin/false prometheus Download dan installl packages prometheus.\nwget https://github.com/prometheus/prometheus/releases/download/v2.44.0/prometheus-2.44.0.linux-amd64.tar.gz tar xvf prometheus-2.44.0.linux-amd64.tar.gz cd prometheus-2.44.0.linux-amd64/ chown -r prometheus:prometheus prometheus promtool console_libraries consoles prometheus.yml cp prometheus promtool /usr/local/bin mkdir /var/lib/prometheus mkdir /etc/prometheus cp -r console_libraries console prometheus.yml /etc/prometheus/ Edit file konfigurasi prometheus.\nnano /etc/prometheus/prometheus.yml #... global: scrape_interval: 15s evaluation_interval: 15s scrape_timeout: 10s scrape_configs: - job_name: \"prometheus\" metrics_path: /metrics scheme: http honor_timestamps: true static_configs: - targets: [\"172.18.251.30:9090\"] - job_name: \"node-exporter\" metrics_path: /metrics scheme: http honor_timestamps: true static_configs: - targets: - 172.18.251.11:9100 - 172.18.251.12:9100 #... Buat service prometheus.\nnano /etc/systemd/system/prometheus/prometheus.service #... [Unit] Description=Prometheus Server [Service] User=prometheus Group=prometheus Type=simple ExecStart=/usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml \\ --storage.tsdb.path=/var/lib/prometheus/ --web.external-url=http://172.18.251.30:9090 --storage.tsdb.max-block-duration=2h \\ --storage.tsdb.min-block-duration=2h --storage.tsdb.retention.time=365d --storage.tsdb.wal-compression --web.enable-lifecycle \\ --web.enable-admin-api --log.level=debug --web.console.templates=/etc/prometheus/consoles --web.console.libraries=/etc/prometheus/console_libraries [Install] WantedBy=multi-user.target #... Lakukan pengecekan apakah konfigurasi file prometheus sudah valid.\npromtool check config /etc/prometheus/prometheus.yml Restart service prometheus.\nsystemctl daemon-reload systemctl restart prometheus.service systemctl enable prometheus.service systemctl status prometheus.service Cek versi prometeheus.\npromtool --version Cek listen port prometheus.\nss -tunlp |grep 9090 Apakah ada jobs yang running.\npromtool query instant 'http://:9090' 'up==1' Akses dashboard prometheus.\nInstall Grafana Grafana adalah software open source yang digunakan untuk membuat visualisasi atau dashboard monitoring dari metrics yang sudah di kumpulkan oleh prometheus.\nInstall dependencies packages grafana.\napt update apt-get install -y gnupg2 curl software-properties-common Tambahkan repository.\ncurl https://packages.grafana.com/gpg.key | sudo apt-key add - add-apt-repository \"deb https://packages.grafana.com/oss/deb stable main\" apt update Install grafana.\napt-cache policy grafana apt -y install grafana=9.5.2 Restart service grafana.\nsystemctl enable grafana-server.service systemctl restart grafana-server.service systemctl status grafana-server.service Cek versi grafana.\ngrafana-cli --version Cek listen port grafana.\nss -tunlp |grep 3000 Akses dashboard grafana.\n","wordCount":"429","inLanguage":"en","datePublished":"2023-05-28T00:00:00Z","dateModified":"2023-05-28T00:00:00Z","author":{"@type":"Person","name":"Ginton Afnanin Khoir"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://opstekel.github.io/posts/prometheus-grafana/"},"publisher":{"@type":"Organization","name":"Ginton Afnanin","logo":{"@type":"ImageObject","url":"https://opstekel.github.io/logo.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://opstekel.github.io accesskey=h title="Ginton Afnanin (Alt + H)">Ginton Afnanin</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://opstekel.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://opstekel.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://opstekel.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://opstekel.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://opstekel.github.io>Home</a>&nbsp;»&nbsp;<a href=https://opstekel.github.io/posts/>Posts</a></div><h1 class=post-title>Install Prometheus dan Grafana</h1><div class=post-description>Monitor Server Dengan Prometheus dan Grafana</div><div class=post-meta>May 28, 2023&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Ginton Afnanin Khoir&nbsp;|&nbsp;<a href=https://github.com/opstekel/opstekel.github.io/tree/main/content/posts/prometheus-grafana.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><div class=details>Table of Contents</div></summary><div class=inner><ul><li><a href=#lingkungan aria-label=Lingkungan>Lingkungan</a><ul><li><a href=#install-node-exporter aria-label="Install Node Exporter">Install Node Exporter</a></li><li><a href=#install-prometheus aria-label="Install Prometheus">Install Prometheus</a></li><li><a href=#install-grafana aria-label="Install Grafana">Install Grafana</a></li></ul></li></ul></div></details></div><div class=post-content><h1 id=lingkungan>Lingkungan<a hidden class=anchor aria-hidden=true href=#lingkungan>#</a></h1><p><img loading=lazy src=/images/diagram-prometheus.png alt></p><h2 id=install-node-exporter>Install Node Exporter<a hidden class=anchor aria-hidden=true href=#install-node-exporter>#</a></h2><p>Node exporter adalah aplikasi yang digunakan untuk mengekspor metrik dari sebuah sistem atau node ke dalam format yang dapat digunakan oleh sistem monitoring seperti prometheus. Node exporter berfungsi sebagai agen yang diinstall pada setiap node atau VM yang ingin di monitoring.</p><p>Buat user node_exporter untuk menjalankan service node exporter.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>useradd --no-create-home --shell /bin/false node_exporter
</span></span></code></pre></div><p>Download dan install packages node exporter.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>wget https://github.com/prometheus/node_exporter/releases/download/v1.5.0/node_exporter-1.5.0.linux-amd64.tar.gz
</span></span><span style=display:flex><span>tar xvf node_exporter-1.5.0.linux-amd64
</span></span><span style=display:flex><span>cd node_exporter-1.5.0.linux-amd64/
</span></span><span style=display:flex><span>chown node_exporter:node_exporter node_exporter
</span></span><span style=display:flex><span>cp node_exporter /usr/local/bin/
</span></span></code></pre></div><p>Untuk melihat collectors node exporter jalankan.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>root@lab-node-exporter-1:~# node_exporter
</span></span></code></pre></div><p>Buat service node exporter.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nano /etc/systemd/system/node_exporter.service
</span></span><span style=display:flex><span><span style=color:#75715e>#...</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>Unit<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Description<span style=color:#f92672>=</span>Node Exporter
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>Service<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>User<span style=color:#f92672>=</span>node_exporter
</span></span><span style=display:flex><span>Type<span style=color:#f92672>=</span>simple
</span></span><span style=display:flex><span>ExecStart<span style=color:#f92672>=</span>/usr/local/bin/node_exporter --collector.systemd --collector.cpu --collector.meminfo --collector.loadavg --collector.uname <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   --collector.stat --collector.filesystem --collector.netstat
</span></span><span style=display:flex><span>Restart<span style=color:#f92672>=</span>on-failure
</span></span><span style=display:flex><span>RestartSec<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>Install<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>WantedBy<span style=color:#f92672>=</span>multi-user.target
</span></span><span style=display:flex><span><span style=color:#75715e>#...</span>
</span></span></code></pre></div><p>Restart service node exporter.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemd daemon-reload
</span></span><span style=display:flex><span>systemctl restart node_exporter.service
</span></span><span style=display:flex><span>systemctl enable node_exporter.service
</span></span><span style=display:flex><span>systemctl status node_exporter.service
</span></span></code></pre></div><p>Cek listen port dari node exporter.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ss -tunlp |grep <span style=color:#ae81ff>9100</span>
</span></span></code></pre></div><p>Check metrics node exporter.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl http://&lt;ip-node-exporter&gt;:9100/metrics
</span></span></code></pre></div><h2 id=install-prometheus>Install Prometheus<a hidden class=anchor aria-hidden=true href=#install-prometheus>#</a></h2><p>Prometheus adalah sistem monitoring open source yang dirancang khusus untuk memantau dan mengumpulkan data metrik dari berbagai sistem dan layanan.</p><p>Buat user prometheus untuk menjalankan service prometheus.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>useradd --no-create-home --shell /bin/false prometheus
</span></span></code></pre></div><p>Download dan installl packages prometheus.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>wget https://github.com/prometheus/prometheus/releases/download/v2.44.0/prometheus-2.44.0.linux-amd64.tar.gz
</span></span><span style=display:flex><span>tar xvf prometheus-2.44.0.linux-amd64.tar.gz
</span></span><span style=display:flex><span>cd prometheus-2.44.0.linux-amd64/
</span></span><span style=display:flex><span>chown -r prometheus:prometheus prometheus promtool console_libraries consoles prometheus.yml
</span></span><span style=display:flex><span>cp prometheus promtool /usr/local/bin
</span></span><span style=display:flex><span>mkdir /var/lib/prometheus
</span></span><span style=display:flex><span>mkdir /etc/prometheus
</span></span><span style=display:flex><span>cp -r console_libraries console prometheus.yml /etc/prometheus/
</span></span></code></pre></div><p>Edit file konfigurasi prometheus.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nano /etc/prometheus/prometheus.yml
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#...</span>
</span></span><span style=display:flex><span>global:
</span></span><span style=display:flex><span>  scrape_interval: 15s
</span></span><span style=display:flex><span>  evaluation_interval: 15s
</span></span><span style=display:flex><span>  scrape_timeout: 10s
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>scrape_configs:
</span></span><span style=display:flex><span>  - job_name: <span style=color:#e6db74>&#34;prometheus&#34;</span>
</span></span><span style=display:flex><span>    metrics_path: /metrics
</span></span><span style=display:flex><span>    scheme: http
</span></span><span style=display:flex><span>    honor_timestamps: true
</span></span><span style=display:flex><span>    static_configs:
</span></span><span style=display:flex><span>      - targets: <span style=color:#f92672>[</span><span style=color:#e6db74>&#34;172.18.251.30:9090&#34;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  - job_name: <span style=color:#e6db74>&#34;node-exporter&#34;</span>
</span></span><span style=display:flex><span>    metrics_path: /metrics
</span></span><span style=display:flex><span>    scheme: http
</span></span><span style=display:flex><span>    honor_timestamps: true
</span></span><span style=display:flex><span>    static_configs:
</span></span><span style=display:flex><span>      - targets:
</span></span><span style=display:flex><span>        - 172.18.251.11:9100
</span></span><span style=display:flex><span>        - 172.18.251.12:9100
</span></span><span style=display:flex><span><span style=color:#75715e>#...</span>
</span></span></code></pre></div><p>Buat service prometheus.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nano /etc/systemd/system/prometheus/prometheus.service
</span></span><span style=display:flex><span><span style=color:#75715e>#...</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>Unit<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Description<span style=color:#f92672>=</span>Prometheus Server
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>Service<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>User<span style=color:#f92672>=</span>prometheus
</span></span><span style=display:flex><span>Group<span style=color:#f92672>=</span>prometheus
</span></span><span style=display:flex><span>Type<span style=color:#f92672>=</span>simple
</span></span><span style=display:flex><span>ExecStart<span style=color:#f92672>=</span>/usr/local/bin/prometheus --config.file<span style=color:#f92672>=</span>/etc/prometheus/prometheus.yml <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --storage.tsdb.path<span style=color:#f92672>=</span>/var/lib/prometheus/ --web.external-url<span style=color:#f92672>=</span>http://172.18.251.30:9090 --storage.tsdb.max-block-duration<span style=color:#f92672>=</span>2h <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --storage.tsdb.min-block-duration<span style=color:#f92672>=</span>2h --storage.tsdb.retention.time<span style=color:#f92672>=</span>365d --storage.tsdb.wal-compression --web.enable-lifecycle <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --web.enable-admin-api --log.level<span style=color:#f92672>=</span>debug --web.console.templates<span style=color:#f92672>=</span>/etc/prometheus/consoles
</span></span><span style=display:flex><span>    --web.console.libraries<span style=color:#f92672>=</span>/etc/prometheus/console_libraries
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>Install<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>WantedBy<span style=color:#f92672>=</span>multi-user.target
</span></span><span style=display:flex><span><span style=color:#75715e>#...</span>
</span></span></code></pre></div><p>Lakukan pengecekan apakah konfigurasi file prometheus sudah valid.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>promtool check config /etc/prometheus/prometheus.yml
</span></span></code></pre></div><p>Restart service prometheus.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl daemon-reload
</span></span><span style=display:flex><span>systemctl restart prometheus.service
</span></span><span style=display:flex><span>systemctl enable prometheus.service
</span></span><span style=display:flex><span>systemctl status prometheus.service
</span></span></code></pre></div><p>Cek versi prometeheus.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>promtool --version
</span></span></code></pre></div><p>Cek listen port prometheus.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ss -tunlp |grep <span style=color:#ae81ff>9090</span>
</span></span></code></pre></div><p>Apakah ada jobs yang running.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>promtool query instant <span style=color:#e6db74>&#39;http://&lt;ip-prometheus&gt;:9090&#39;</span>  <span style=color:#e6db74>&#39;up==1&#39;</span>
</span></span></code></pre></div><p>Akses dashboard prometheus.</p><p><img loading=lazy src=/images/dashboard-prometheus.png alt></p><h2 id=install-grafana>Install Grafana<a hidden class=anchor aria-hidden=true href=#install-grafana>#</a></h2><p>Grafana adalah software open source yang digunakan untuk membuat visualisasi atau dashboard monitoring dari metrics yang sudah di kumpulkan oleh prometheus.</p><p>Install dependencies packages grafana.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>apt update
</span></span><span style=display:flex><span>apt-get install -y gnupg2 curl software-properties-common
</span></span></code></pre></div><p>Tambahkan repository.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl https://packages.grafana.com/gpg.key | sudo apt-key add -
</span></span><span style=display:flex><span>add-apt-repository <span style=color:#e6db74>&#34;deb https://packages.grafana.com/oss/deb stable main&#34;</span>
</span></span><span style=display:flex><span>apt update
</span></span></code></pre></div><p>Install grafana.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>apt-cache policy grafana
</span></span><span style=display:flex><span>apt -y install grafana<span style=color:#f92672>=</span>9.5.2
</span></span></code></pre></div><p>Restart service grafana.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl enable grafana-server.service
</span></span><span style=display:flex><span>systemctl restart grafana-server.service
</span></span><span style=display:flex><span>systemctl status grafana-server.service
</span></span></code></pre></div><p>Cek versi grafana.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>grafana-cli --version
</span></span></code></pre></div><p>Cek listen port grafana.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ss -tunlp |grep <span style=color:#ae81ff>3000</span>
</span></span></code></pre></div><p>Akses dashboard grafana.</p><p><img loading=lazy src=/images/dashboard-grafana.png alt></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://opstekel.github.io/tags/node-exporter/>Node Exporter</a></li><li><a href=https://opstekel.github.io/tags/prometheus/>Prometheus</a></li><li><a href=https://opstekel.github.io/tags/grafana/>Grafana</a></li></ul><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Install Prometheus dan Grafana on twitter" href="https://twitter.com/intent/tweet/?text=Install%20Prometheus%20dan%20Grafana&amp;url=https%3a%2f%2fopstekel.github.io%2fposts%2fprometheus-grafana%2f&amp;hashtags=NodeExporter%2cPrometheus%2cGrafana"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Install Prometheus dan Grafana on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fopstekel.github.io%2fposts%2fprometheus-grafana%2f&amp;title=Install%20Prometheus%20dan%20Grafana&amp;summary=Install%20Prometheus%20dan%20Grafana&amp;source=https%3a%2f%2fopstekel.github.io%2fposts%2fprometheus-grafana%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Install Prometheus dan Grafana on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fopstekel.github.io%2fposts%2fprometheus-grafana%2f&title=Install%20Prometheus%20dan%20Grafana"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Install Prometheus dan Grafana on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fopstekel.github.io%2fposts%2fprometheus-grafana%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Install Prometheus dan Grafana on whatsapp" href="https://api.whatsapp.com/send?text=Install%20Prometheus%20dan%20Grafana%20-%20https%3a%2f%2fopstekel.github.io%2fposts%2fprometheus-grafana%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Install Prometheus dan Grafana on telegram" href="https://telegram.me/share/url?text=Install%20Prometheus%20dan%20Grafana&amp;url=https%3a%2f%2fopstekel.github.io%2fposts%2fprometheus-grafana%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://opstekel.github.io>Ginton Afnanin</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById("menu");menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>